<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>FairRoot: Help on configuring devices</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">FairRoot
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/d98/md__Users_turany_development_FairRoot_example_Tutorial3_macro_README.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Help on configuring devices </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Currently, the configuration of topologies and devices is done via bash scripts. In the future, this will be handled by the <a href="https://github.com/FairRootGroup/DDS">DDS</a> and a dedicated web interface.</p>
<p>Here is a brief description of the script arguments and their possible values.</p>
<p>Further details for available device options can be queried for any executable when called with <code>--help</code> command line option.</p>
<h3>Common for all devices</h3>
<p>**&ndash;id**: device ID. Just something to identify the device, currently used only in logger output.</p>
<p>**&ndash;io-threads**: Optional parameter, to change the number of i/o threads ZeroMQ should use. Default value is 1 i/o thread. According to <a href="http://zguide.zeromq.org/page:all#I-O-Threads">ZeroMQ documentation</a>, using more than one thread only becomes relevant at 1GB/s and above.</p>
<p>**&ndash;output-socket-type**: output pattern. Possible values: "push"/"pub".</p>
<p>**&ndash;output-buff-size**: size of the ZeroMQ output queue in number of messages. For nanomsg transport, the size is in bytes.</p>
<p>**&ndash;output-method**: output method - "bind"/"connect". One side should bind and other should connect. The order doesn't matter, but for some topologies chosing the right combination can simplify the configuration.</p>
<p>**&ndash;output-address**: output interface, address and port.</p>
<p>**&ndash;input-socket-type**: same as above, but for input. Possible values: pull/sub.</p>
<p>**&ndash;input-buff-size**: same as above, but for input.</p>
<p>**&ndash;input-method**: same as above, but for input.</p>
<p>**&ndash;input-address**: same as above, but for input.</p>
<h3>Sampler specific</h3>
<p>**&ndash;input-file**: input file (specific to sampler task).</p>
<p>**&ndash;parameter-file**: parameter file (specific to sampler task).</p>
<p>**&ndash;branch**: sampler task. Default for Tutorial3 is "FairTestDetectorDigi".</p>
<h3>Processor specific</h3>
<p>**&ndash;processor-task**: processor task. Default for Tutorial3 is "FairTestDetectorMQRecoTask".</p>
<h3>Data format definition</h3>
<p>Currently, there is a separate binary for each data format (binary, boost serialized, protocol buffer). This choice is likely to become another parameter in the future, but for now, the data format can be given to the bash script as a command line argument, as follows:</p>
<p>```bash ./startAll.sh bin ./startAll.sh boost ./startAll.sh proto ```</p>
<p>The script will then start the corresponding executable. If no or incorrect parameters are provided, binary method will be used! Protobuf method currently works only if the library is available on the system, otherwise it is not compiled.</p>
<h2>Example</h2>
<p>The following bash script will start a topology consisting of three devices - <em>Sampler</em>, <em>Processor</em> and <em>FileSink</em>:</p>
<p>```bash #!/bin/bash</p>
<p>if(@); then buffSize="50000000" # nanomsg buffer size is in bytes else buffSize="1000" # zeromq high-water mark is in messages fi</p>
<p>dataFormat="Bin" if [ "$1" = "bin" ]; then echo "attempting to use pure binary data format" elif [ "$1" = "boost" ]; then dataFormat="Boost" echo "attempting to use Boost serialized data format" elif [ "$1" = "proto" ]; then dataFormat="Proto" echo "attempting to use Google Protocol Buffers data format" elif [ "$1" = "root" ]; then dataFormat="Root" echo "attempting to use Root TMessage data format" else echo "none or incorrect data formats provided." echo "(available data format options are: bin, boost, proto, root)" echo "binary data format will be used." fi</p>
<p>SAMPLER="testDetectorSampler$dataFormat" SAMPLER+=" --id 101" SAMPLER+=" --input-file @CMAKE_SOURCE_DIR@/example/Tutorial3/macro/data/testdigi.root" SAMPLER+=" --parameter-file @CMAKE_SOURCE_DIR@/example/Tutorial3/macro/data/testparams.root" SAMPLER+=" --output-socket-type push --output-buff-size $buffSize --output-method bind --output-address tcp://*:5565" xterm -e @/bin/$SAMPLER &amp;</p>
<p>PROCESSOR="testDetectorProcessor$dataFormat" PROCESSOR+=" --id 201" PROCESSOR+=" --input-socket-type pull --input-buff-size $buffSize --input-method connect --input-address tcp://localhost:5565" PROCESSOR+=" --output-socket-type push --output-buff-size $buffSize --output-method connect --output-address tcp://localhost:5570" xterm -e @/bin/$PROCESSOR &amp;</p>
<p>FILESINK="fileSink$dataFormat" FILESINK+=" --id 301" FILESINK+=" --input-socket-type pull --input-buff-size $buffSize --input-method bind --input-address tcp://*:5570" xterm -e @/bin/$FILESINK &amp;</p>
<p>``` </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed May 13 2015 21:19:55 for FairRoot by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
