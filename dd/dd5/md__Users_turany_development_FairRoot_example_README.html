<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>FairRoot: README</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">FairRoot
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dd/dd5/md__Users_turany_development_FairRoot_example_README.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>#Examples</p>
<h2>Tutorial1:</h2>
<p>How to implement a simple detector using the old ASCII interface to describe the geometry (see Detector Geometry and Media for more details about this geometry interface) See also Adding new detector for a detailed description of the detector class implementation, MC point class and the CMakeLists.txt</p>
<p>To run this tutorial:</p>
<p>After building FairRoot successfully go to the build directory and call the configuration script (config.sh or config.csh according to our shell) cd to the Tutorial1/macros directory run the following command: root run_tutorial1.C (you can also load the macro into root and then run it) This will start a simulation session with Geant3 and create 10 events generated by a box generator, the input in the box generator can be chosen by the user, by default in this macro we use "pions" (see macro lines 20-22) for details. To choose Geant4 you just have to change TGeant3 to TGeant4 in line 8 of the macro, or of you are loading the macro to root before exciting it you just give TGeant4 as second argument to the run_tutorial1 call, i.e:</p>
<p>```bash root&gt;.L run_tutorial1.C root&gt;run_tutorial(10, "TGeant4") ```</p>
<h2>Tutorial2</h2>
<p>This example show you how to:</p>
<p>Simulate a simple detector (run_tutorial2.C) Read the simulated data, and the digitization parameters from "parameters/tutdet.digi.par" and create digitized data (create_digis.C) Read the digitized data for further reconstruction (read_digis.C)</p>
<h2>Tutorial3</h2>
<p>This example demonstrate</p>
<p>detector simulation event by event digitization time based digitization Message Queue based reconstruction: The Message Queue based reconstruction demonstrates the usage of <a class="el" href="../../d5/d87/namespaceFairMQ.html">FairMQ</a>. Any number of "sampler" processes (<a class="el" href="../../d3/d91/classFairMQSampler.html">FairMQSampler</a>, <a class="el" href="../../df/daa/classFairMQSamplerTask.html">FairMQSamplerTask</a>, <a class="el" href="../../d1/d49/classTestDetectorDigiLoader.html">TestDetectorDigiLoader</a>) send the data generated in the digitization step to a number of "processor" processes which do the reconstruction with the data (<a class="el" href="../../d5/d5b/classFairMQProcessor.html">FairMQProcessor</a>, <a class="el" href="../../d5/d02/classFairMQProcessorTask.html">FairMQProcessorTask</a>, <a class="el" href="../../d2/d61/classFairTestDetectorMQRecoTask.html">FairTestDetectorMQRecoTask</a>). After the reconstruction task, the processes send the output data to a number of "sink" processes, which write the data to disk (<a class="el" href="../../d1/d24/classFairMQFileSink.html">FairMQFileSink</a>). All the communication between these processes is done via <a class="el" href="../../d5/d87/namespaceFairMQ.html">FairMQ</a> and can be configured to run over network (tcp) or on a local machine with inter-process communication (ipc). Currently, the number of processes and their parameters are configured with bash scripts/command line parameters. The scripts are located in the macro directory, together with README.md for more details on how to configure them. Event display </p><h2>Tutorial4</h2>
<p>This example demonstrate:</p>
<p>using ROOT geometry as input for detector description, i.e: the geometry is created and saved to a ROOT file from a macro ( Create_Tutorial4_Geometry.C). The ROOT file is read by the detector classes during simulation </p><h2>Tutorial5</h2>
<p>Shows how to use FairDB interface to write and read parameter to a database system. Two type of parameter classes are implemented with</p>
<p>simple data members ( <a class="el" href="../../d3/d46/classFairDbTutPar.html">FairDbTutPar</a>) complex data members i.e ROOT object ( <a class="el" href="../../de/d4e/classFairDbTutParBin.html">FairDbTutParBin</a>) In both cases, corresponding macro to read and write as well as a script. To setup the database to be used (dbconfig.sh) are available from the macro directory. rutherford simple simulation of the Rutherford experiment, with event display.</p>
<h2>Tutorial6</h2>
<h4>Initialisation of parameter within MQ Tasks</h4>
<ul>
<li>Introduction</li>
</ul>
<p>This example demonstrates the usage of the runtimeDb services ( including comunication to SQL databases via FairDB ) in order to initialise parameter at a certain time within <a class="el" href="../../d5/d87/namespaceFairMQ.html">FairMQ</a> Tasks. Once a parameter has been initialised, it is cached together with its interval of validity. Further calls to an update will only trigger an initialistation if the update time falls outside of the parameter interval of validity. In all other cases, a pointer to the valid parameter will be forwarded to the MQ process.</p>
<ul>
<li>Getting started</li>
</ul>
<p>In order to run the example you should first create a dummy simulation root file and convert it to a dummy digits root file. This fisrt operation is done using the following predefined macros</p>
<p>simulation: ```bash root&gt;.L run_sim.C root&gt;run_sim(10000, "TGeant3") ``` digitisation: ```bash root&gt;.L run_digi.C root&gt;run_digi("TGeant3") ``` this should create the following root file in the subdirectory data.</p>
<p>```bash -rw-r&ndash;r&ndash; 1 denis staff 9.2K Aug 11 08:36 FairRunInfo_testdigi_TGeant3.root -rw-r&ndash;r&ndash; 1 denis staff 11K Aug 11 08:36 FairRunInfo_testrun_TGeant3.root -rw-r&ndash;r&ndash; 1 denis staff 9.6K Aug 11 08:36 geofile_full.root -rw-r&ndash;r&ndash; 1 denis staff 277K Aug 11 08:36 testdigi_TGeant3.root -rw-r&ndash;r&ndash; 1 denis staff 7.9K Aug 11 08:36 testdigi_TGeant3.root.out.root -rw-r&ndash;r&ndash; 1 denis staff 37K Aug 11 08:36 testparams_TGeant3.root -rw-r&ndash;r&ndash; 1 denis staff 85M Aug 11 08:36 testrun_TGeant3.root ```</p>
<ul>
<li>Launch the FairDbMQ dispatcher</li>
</ul>
<p>With the FairMQDB the <a class="el" href="../../d5/d87/namespaceFairMQ.html">FairMQ</a> Tasks do not directly communicate to the backend parameter store but initialisation messages are routed through a continuously running process i.e the FairDbMQ dispatcher. The user should launch the daemon once i.e</p>
<p>```bash &lt;my_fairroot_path&gt;/build/bin/db_dispatcher &amp; ```</p>
<p>The FairDbMQ dispatcher is then continuously listening to connection comming from</p>
<ul>
<li><a class="el" href="../../d5/d87/namespaceFairMQ.html">FairMQ</a> Tasks requiring an initialisation</li>
<li>Assigned FairDBMQWorker process to handle this request</li>
</ul>
<p>Once the FairDbMQDispatcher process is run, you should see the following prompt</p>
<p>```bash -I- FairDbMQDispatcher:: Queueing Daemon Started ... ``` meaning that process initialised itself properly and is running on the background.</p>
<ul>
<li>Launch the Assigned FairDbMQWorker</li>
</ul>
<p>In order to handle an initialisation request, the user should launch at least one FairDbMQ worker process which as the FairDbMQDispatcher is daemonized.</p>
<p>```bash &lt;my_fairroot_path&gt;/build/bin/db_tut6worker &amp; ```</p>
<p>Once the FairDbMQworker process is run, you should see the following prompt</p>
<p>```bash [12:07:03][DEBUG] -I- FairDbMQWorker::Run() Set Io input:</p>
<p>[12:07:03][DEBUG] -I- FairDbMQWorker:: input IO: Text File: /Users/denis/fairroot/fairbase/example/tutorial5/macros/ascii-example.par</p>
<p>[12:07:03][DEBUG] -I- FairDbMQWorker::Run() Set Io Output:</p>
<p>-I- <a class="el" href="../../dc/d3c/classFairDbMQTutWorker.html">FairDbMQTutWorker</a>:: <a class="el" href="../../d3/d46/classFairDbTutPar.html">FairDbTutPar</a> is created -I-FairDbTutContFact::createContainer TUTParDefault -I- FAIRDbConnectionPool fGlobalSeqNoDbNo 0 -I- FairDbMQWorker::Run() RTDB initialised ... ready to work ...: -I- FairDbMQWorker Local cache container Key: TUTParDefault Values OBJ: <a class="el" href="../../d3/d46/classFairDbTutPar.html">FairDbTutPar</a> TUTParDefault Default tutorial parameters ``` Meaning that the assigned FairDbMQWorker is properly initialised and is waiting to handle initialisation requests for the container stored in its internal cache, namely in this case the <a class="el" href="../../d3/d46/classFairDbTutPar.html">FairDbTutPar</a> parameter object.</p>
<ul>
<li>SQL Database settings</li>
</ul>
<p>Furthermore, in this example, the FairDbMQWorker will use an SQL server to fetch the updated parameters values if needed. In FairDB services are used within the assigned worker, the user, before launching it, needs to define the connection to a Database system (MySQL, PostGreSQL or SQlite ) as it required by the FairDb Library i.e</p>
<p>As an example, such a definition for a local MySQL server is done exporting the following environment varaiables:</p>
<p>```bash export FAIRDB_TSQL_URL="mysql://localhost/r3b" export FAIRDB_TSQL_USER="scott" export FAIRDB_TSQL_PSWD="tiger" ```</p>
<p>A more complete script is provided for setting up the main supported RDBMS backends namely MySQL, PostGreSQL and SQLite:</p>
<p>```bash &lt;my_fairroot_path&gt;/build/bin/dbconfig.sh ```</p>
<ul>
<li>Main MQ Tasks</li>
</ul>
<p>After these steps are done, to run the example for parameter initialisation just run the dummy MQtasks scripts ( sampler - processor ( with initialisation) - file_sink ) .</p>
<p>```bash &lt;my_fairroot_path&gt;/build/bin/run_sps_init.sh ```</p>
<h2>Flp2epn</h2>
<p>Simple example for Message based processing using FairRoot. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed May 13 2015 21:19:55 for FairRoot by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
